package mall.active;


import javax.jms.Connection;
import javax.jms.ConnectionFactory;
import javax.jms.Queue;
import javax.jms.Session;

import org.apache.activemq.ActiveMQConnectionFactory;



public class ActiveMqTest {
	/**
	 * 点到点形式发送消息
	 * <p>Title: testQueueProducer</p>
	 * <p>Description: </p>
	 * @throws Exception
	 */
	public void testQueueProducer() throws Exception{
		//1.创建一个连接工厂对象,需要指定服务的ip及端口
		ConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://192.168.25.177:61616");
		//2.使用工厂对象创建一个Connection对象
		Connection connection = connectionFactory.createConnection();
		//3.开启连接，调用Connection的start的方法
		 connection.start();
		//4.创建一个session对象 
		//第一个参数，是否开启事务.如果开启事务，第二个参数无意义，一般不开启事务
		//第二个参数，应答模式，一般是自动应答
		 Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
		//5.使用session创建一个destination对象
		 Queue queue = session.createQueue("test-queue");
		//6.使用session创建土匪producer对象
		//7.创建一个message对象，可以使用TextMessafe
		//8.发送消息
		//9.关闭连接
	}
}
